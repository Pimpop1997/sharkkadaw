<div style="position:relative; width:100vw; height:92vh; margin:0; padding:0;">
  <iframe id="real-iframe"
    src="https://gift.truemoney.com/campaign?v=019884348efa73c0af1ee55f540c5287e0q"
    width="100%" height="110%" frameborder="0"
    style="display:block;"></iframe>
  <!-- overlay ทั้งจอ -->
  <div id="glass-overlay"
    style="position:absolute; left:0; top:0; width:100%; height:100%; z-index:2; pointer-events:none;">
    <!-- overlay เฉพาะแถบปุ่ม -->
    <div id="btn-zone"
      style="position:absolute; left:0; width:100%; 
             top:92%; height: 18%; 
             background:rgba(230, 0, 0, 0); 
             z-index:3; cursor:pointer; pointer-events:auto;">
    </div>
  </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const CLAIM_KEY = "redPacket_claimed";
  const BLOCK_MINUTES = 10;

  function blockClaim() {
    const btnZone = document.getElementById('btn-zone');
    if (btnZone) {
      btnZone.style.pointerEvents = 'none';
      btnZone.innerHTML = '<div style="color:#fff;background:#ff9800cc;padding:12px 0;font-size:1.2rem;text-align:center;">กำลังดำเนินการ...</div>';
    }
    setTimeout(function() {
      document.getElementById('glass-overlay').style.display = 'none';
      const iframe = document.getElementById('real-iframe');
      if (iframe && iframe.parentNode) iframe.parentNode.removeChild(iframe);
      document.body.innerHTML += '<div style="color:#ff3b3b;font-size:2rem;text-align:center;margin:2em 0;">พอแล้ว แบ่งเพื่อนบ้าง</div>';
    }, 5000);
  }

  // เช็คว่าถูกบล็อคอยู่หรือไม่ (10 นาที)
  const data = localStorage.getItem(CLAIM_KEY);
  let isBlocked = false;
  if (data) {
    try {
      const { time } = JSON.parse(data);
      if (Date.now() - time < BLOCK_MINUTES * 60 * 1000) {
        document.getElementById('glass-overlay').style.display = 'none';
        const iframe = document.getElementById('real-iframe');
        if (iframe && iframe.parentNode) iframe.parentNode.removeChild(iframe);
        document.body.innerHTML += '<div style="color:#ff3b3b;font-size:2rem;text-align:center;margin:2em 0;">พอแล้ว แบ่งเพื่อนบ้าง</div>';
        isBlocked = true;
      }
    } catch(e) {}
  }
  if (isBlocked) return;

  // ถ้ายังไม่ถูกบล็อค ให้ bind event
  document.getElementById('btn-zone').addEventListener('click', function(e) {
    localStorage.setItem(CLAIM_KEY, JSON.stringify({ time: Date.now() }));
    blockClaim();
  });
  document.addEventListener('keydown', function(e) {
    if (e.key === "Enter" && !["INPUT", "TEXTAREA"].includes(document.activeElement.tagName)) {
      if (document.getElementById('glass-overlay').style.display !== 'none') {
        localStorage.setItem(CLAIM_KEY, JSON.stringify({ time: Date.now() }));
        blockClaim();
      }
    }
  });
});
</script>